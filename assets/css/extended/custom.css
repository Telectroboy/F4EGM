/* ==========================================
   FOND GLOBAL (toujours visible)
   ========================================== */
body::before {
    content: "";
    position: fixed;
    inset: 0;
    background-image: url(/images/fondF4EGM.png);
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;
    background-attachment: fixed;
    z-index: -2; /* sous tout */
    filter: brightness(.55) contrast(1.1);
}

/* ==========================================
   OVERLAY SUR LA ZONE D'ÉCRITURE + MENU
   ========================================== */
body .main::before,
body .nav::before {
    content: "";
    position: absolute;
    inset: 0;
    border-radius: 12px;
    z-index: -1; /* entre fond et texte */
    backdrop-filter: blur(6px);
    transition: background-color 0.3s ease, -webkit-mask-image 0.3s ease;
    
    /* BORDS DÉGRADÉS pour transition douce 
    -webkit-mask-image: radial-gradient(circle at center, rgba(0,0,0,1) 90%, rgba(0,0,0,0) 100%);
    mask-image: radial-gradient(circle at center, rgba(0,0,0,1) 90%, rgba(0,0,0,0) 100%);
    mask-repeat: no-repeat;
    mask-position: center;
    mask-size: cover;
}*/
    /* Masque dégradé sur tous les bords */
    -webkit-mask-image: 
        linear-gradient(to right, rgba(0,0,0,0), rgba(0,0,0,1) 5%, rgba(0,0,0,1) 95%, rgba(0,0,0,0));
    -webkit-mask-composite: destination-in;
    mask-image: 
        linear-gradient(to right, rgba(0,0,0,0), rgba(0,0,0,1) 5%, rgba(0,0,0,1) 95%, rgba(0,0,0,0));
    mask-composite: intersect;

    /* Combinaison pour haut/bas */
    -webkit-mask-image: 
        linear-gradient(to top, rgba(0,0,0,0), rgba(0,0,0,1) 5%, rgba(0,0,0,1) 95%, rgba(0,0,0,0)),
        linear-gradient(to left, rgba(0,0,0,0), rgba(0,0,0,1) 5%, rgba(0,0,0,1) 95%, rgba(0,0,0,0));
    -webkit-mask-composite: destination-in;
    mask-image: 
        linear-gradient(to top, rgba(0,0,0,0), rgba(0,0,0,1) 5%, rgba(0,0,0,1) 95%, rgba(0,0,0,0)),
        linear-gradient(to left, rgba(0,0,0,0), rgba(0,0,0,1) 5%, rgba(0,0,0,1) 95%, rgba(0,0,0,0));
    mask-composite: intersect;
}

/* ==========================================
   LIGHT MODE
   ========================================== */
html[data-theme="light"] body .main::before,
html[data-theme="light"] body .nav::before {
    background-color: rgba(255,255,255,0.4); /* même luminosité */
}

/* ==========================================
   DARK MODE
   ========================================== */
html[data-theme="dark"] body .main::before,
html[data-theme="dark"] body .nav::before {
    background-color: rgba(0,0,0,0.5); /* même luminosité */
}

/* ==========================================
   POSITIONNEMENT RELATIF DES ZONES
   ========================================== */
body .main,
body .nav {
    position: relative;
    z-index: 0;
    border-radius: 12px;
    padding: 2rem;
    background: transparent; /* l’overlay ::before gère le flou / couleur */
}

/* ==========================================
   TEXTE
   ========================================== */
body .main,
body .nav,
body .main * {
    color: var(--primary); /* ou définir selon thème */
}
